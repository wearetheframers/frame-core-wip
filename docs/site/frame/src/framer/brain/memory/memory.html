<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>frame.src.framer.brain.memory.memory API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>frame.src.framer.brain.memory.memory</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="frame.src.framer.brain.memory.memory.Memory"><code class="flex name class">
<span>class <span class="ident">Memory</span></span>
<span>(</span><span>config: Dict[str, Any])</span>
</code></dt>
<dd>
<div class="desc"><p>The Memory class manages memory storage and retrieval for Framers.</p>
<p>It supports both global and multi-user memory contexts. When no user ID is provided,
memories are stored in a global context. When multiple user IDs are provided, the
memory retrieval process searches across all specified user IDs.</p>
<p>This is achieved using the Mem0Adapter, which abstracts away the
underlying storage solution and provides a flexible interface for memory operations.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Memory:
    &#34;&#34;&#34;
    The Memory class manages memory storage and retrieval for Framers.

    It supports both global and multi-user memory contexts. When no user ID is provided,
    memories are stored in a global context. When multiple user IDs are provided, the
    memory retrieval process searches across all specified user IDs.

    This is achieved using the Mem0Adapter, which abstracts away the
    underlying storage solution and provides a flexible interface for memory operations.
    &#34;&#34;&#34;

    def __init__(self, config: Dict[str, Any]):
        self.core = {}
        self.short_term = []
        self.mem0 = Mem0Adapter()
        self.user_id = config.get(&#34;user_id&#34;, &#34;default&#34;)

    def get_core_memory(self, key: str) -&gt; Any:
        &#34;&#34;&#34;
        Retrieve a specific core memory by its key.

        Args:
            key (str): The key of the memory to retrieve.

        Returns:
            Any: The retrieved memory data, or None if not found.
        &#34;&#34;&#34;
        core_memory = self.core.get(key)
        if core_memory is not None:
            return core_memory

        mem0_data = self.mem0.get_all(user_id=self.user_id)
        for memory_id, item in enumerate(mem0_data):
            if isinstance(item, dict) and item.get(&#34;metadata&#34;, {}).get(&#34;key&#34;) == key:
                return item.get(&#34;memory&#34;)
        return None

    def set_core_memory(self, key: str, value: Any) -&gt; Any:
        &#34;&#34;&#34;
        Set a value in core memory.

        Args:
            key (str): The key to store the memory under.
            value (Any): The value to store in memory.

        Returns:
            Any: The stored value.
        &#34;&#34;&#34;
        self.core[key] = value
        self.mem0.store(str(value), user_id=self.user_id, metadata={&#34;key&#34;: key})
        return value

    def retrieve_memory(self, key: str) -&gt; Any:
        &#34;&#34;&#34;
        Alias for get_core_memory for backward compatibility.

        Args:
            key (str): The key of the memory to retrieve.

        Returns:
            Any: The retrieved memory data, or None if not found.
        &#34;&#34;&#34;
        return self.get_core_memory(key)

    def add_long_term_memory(
        self,
        memory: str,
        user_id: Optional[str] = None,
        metadata: Optional[Dict[str, Any]] = None,
    ):
        self.mem0.store(memory, user_id=user_id or self.user_id, metadata=metadata)

    def add_short_term_memory(self, memory: Dict[str, Any]):
        self.short_term.append(memory)
        if len(self.short_term) &gt; 10:  # Limit short-term memory to last 10 items
            self.short_term.pop(0)

    def get_all_memories(self) -&gt; Dict[str, Any]:
        return {
            &#34;core&#34;: self.core,
            &#34;long_term&#34;: self.mem0.get_all(user_id=self.user_id),
            &#34;short_term&#34;: self.short_term,
        }

    def search_memories(
        self, query: str, user_id: str = &#34;default&#34;
    ) -&gt; List[Dict[str, Any]]:
        core_results = [
            {&#34;memory&#34;: v, &#34;source&#34;: &#34;core&#34;}
            for k, v in self.core.items()
            if query.lower() in str(v).lower()
        ]
        mem0_results = self.mem0.search(query, user_id=user_id)
        return core_results + mem0_results

    def update_memory(self, key: str, value: str):
        self.core[key] = value
        self.mem0.update(memory_id=key, data=value)

    def get_memory_history(self, memory_id: int) -&gt; List[str]:
        return self.mem0.history(memory_id=memory_id)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="frame.src.framer.brain.memory.memory.Memory.add_long_term_memory"><code class="name flex">
<span>def <span class="ident">add_long_term_memory</span></span>(<span>self, memory: str, user_id: Optional[str] = None, metadata: Optional[Dict[str, Any]] = None)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="frame.src.framer.brain.memory.memory.Memory.add_short_term_memory"><code class="name flex">
<span>def <span class="ident">add_short_term_memory</span></span>(<span>self, memory: Dict[str, Any])</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="frame.src.framer.brain.memory.memory.Memory.get_all_memories"><code class="name flex">
<span>def <span class="ident">get_all_memories</span></span>(<span>self) ‑> Dict[str, Any]</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="frame.src.framer.brain.memory.memory.Memory.get_core_memory"><code class="name flex">
<span>def <span class="ident">get_core_memory</span></span>(<span>self, key: str) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieve a specific core memory by its key.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>key</code></strong> :&ensp;<code>str</code></dt>
<dd>The key of the memory to retrieve.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Any</code></dt>
<dd>The retrieved memory data, or None if not found.</dd>
</dl></div>
</dd>
<dt id="frame.src.framer.brain.memory.memory.Memory.get_memory_history"><code class="name flex">
<span>def <span class="ident">get_memory_history</span></span>(<span>self, memory_id: int) ‑> List[str]</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="frame.src.framer.brain.memory.memory.Memory.retrieve_memory"><code class="name flex">
<span>def <span class="ident">retrieve_memory</span></span>(<span>self, key: str) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>Alias for get_core_memory for backward compatibility.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>key</code></strong> :&ensp;<code>str</code></dt>
<dd>The key of the memory to retrieve.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Any</code></dt>
<dd>The retrieved memory data, or None if not found.</dd>
</dl></div>
</dd>
<dt id="frame.src.framer.brain.memory.memory.Memory.search_memories"><code class="name flex">
<span>def <span class="ident">search_memories</span></span>(<span>self, query: str, user_id: str = 'default') ‑> List[Dict[str, Any]]</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="frame.src.framer.brain.memory.memory.Memory.set_core_memory"><code class="name flex">
<span>def <span class="ident">set_core_memory</span></span>(<span>self, key: str, value: Any) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>Set a value in core memory.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>key</code></strong> :&ensp;<code>str</code></dt>
<dd>The key to store the memory under.</dd>
<dt><strong><code>value</code></strong> :&ensp;<code>Any</code></dt>
<dd>The value to store in memory.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Any</code></dt>
<dd>The stored value.</dd>
</dl></div>
</dd>
<dt id="frame.src.framer.brain.memory.memory.Memory.update_memory"><code class="name flex">
<span>def <span class="ident">update_memory</span></span>(<span>self, key: str, value: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="frame.src.framer.brain.memory" href="index.html">frame.src.framer.brain.memory</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="frame.src.framer.brain.memory.memory.Memory" href="#frame.src.framer.brain.memory.memory.Memory">Memory</a></code></h4>
<ul class="">
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.add_long_term_memory" href="#frame.src.framer.brain.memory.memory.Memory.add_long_term_memory">add_long_term_memory</a></code></li>
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.add_short_term_memory" href="#frame.src.framer.brain.memory.memory.Memory.add_short_term_memory">add_short_term_memory</a></code></li>
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.get_all_memories" href="#frame.src.framer.brain.memory.memory.Memory.get_all_memories">get_all_memories</a></code></li>
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.get_core_memory" href="#frame.src.framer.brain.memory.memory.Memory.get_core_memory">get_core_memory</a></code></li>
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.get_memory_history" href="#frame.src.framer.brain.memory.memory.Memory.get_memory_history">get_memory_history</a></code></li>
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.retrieve_memory" href="#frame.src.framer.brain.memory.memory.Memory.retrieve_memory">retrieve_memory</a></code></li>
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.search_memories" href="#frame.src.framer.brain.memory.memory.Memory.search_memories">search_memories</a></code></li>
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.set_core_memory" href="#frame.src.framer.brain.memory.memory.Memory.set_core_memory">set_core_memory</a></code></li>
<li><code><a title="frame.src.framer.brain.memory.memory.Memory.update_memory" href="#frame.src.framer.brain.memory.memory.Memory.update_memory">update_memory</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
