<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>frame.src.framer.framer_factory API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>frame.src.framer.framer_factory</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="frame.src.framer.framer_factory.FramerBuilder"><code class="flex name class">
<span>class <span class="ident">FramerBuilder</span></span>
<span>(</span><span>config: <a title="frame.src.framer.config.FramerConfig" href="config.html#frame.src.framer.config.FramerConfig">FramerConfig</a>, llm_service: <a title="frame.src.services.llm.main.LLMService" href="../services/llm/main.html#frame.src.services.llm.main.LLMService">LLMService</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Builder class for constructing Framer instances.</p>
<p>This class provides a flexible interface for configuring and
creating Framer objects using the FramerFactory.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FramerBuilder:
    &#34;&#34;&#34;
    Builder class for constructing Framer instances.

    This class provides a flexible interface for configuring and
    creating Framer objects using the FramerFactory.
    &#34;&#34;&#34;

    def __init__(self, config: FramerConfig, llm_service: LLMService):
        if not isinstance(config, FramerConfig):
            raise ValueError(&#34;Config must be an instance of FramerConfig&#34;)
        self.config = config
        if not isinstance(llm_service, LLMService):
            raise ValueError(&#34;llm_service must be an instance of LLMService&#34;)
        self.llm_service = llm_service

    async def build(self) -&gt; Framer:
        &#34;&#34;&#34;
        Asynchronously build a Framer instance.

        Returns:
            Framer: A new Framer instance, fully configured and ready to use.
        &#34;&#34;&#34;
        return await FramerFactory(self.config, self.llm_service).create_framer()</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="frame.src.framer.framer_factory.FramerBuilder.build"><code class="name flex">
<span>async def <span class="ident">build</span></span>(<span>self) ‑> <a title="frame.src.framer.framer.Framer" href="framer.html#frame.src.framer.framer.Framer">Framer</a></span>
</code></dt>
<dd>
<div class="desc"><p>Asynchronously build a Framer instance.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Framer</code></dt>
<dd>A new Framer instance, fully configured and ready to use.</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="frame.src.framer.framer_factory.FramerFactory"><code class="flex name class">
<span>class <span class="ident">FramerFactory</span></span>
<span>(</span><span>config: <a title="frame.src.framer.config.FramerConfig" href="config.html#frame.src.framer.config.FramerConfig">FramerConfig</a>, llm_service: <a title="frame.src.services.llm.main.LLMService" href="../services/llm/main.html#frame.src.services.llm.main.LLMService">LLMService</a>, plugins: Optional[Dict[str, Any]] = [])</span>
</code></dt>
<dd>
<div class="desc"><p>Factory class for creating Framer instances.</p>
<p>This class encapsulates the logic for constructing Framer objects,
ensuring that all necessary components are properly initialized.</p>
<p>The Framer includes a <code>halt()</code> method to stop its actions and task processing.</p>
<p>The FramerFactory supports the creation of Framers with custom plugins,
allowing for extensive customization and expansion of capabilities.
This plugin system is designed to be as flexible and powerful as mods in games,
enabling developers to create a wide range of extensions and enhancements.</p>
<p>Initialize the FramerBuilder with configuration and LLM service.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>config</code></strong> :&ensp;<code>FramerConfig</code></dt>
<dd>Configuration for the Framer.</dd>
<dt><strong><code>llm_service</code></strong> :&ensp;<code>LLMService</code></dt>
<dd>Language model service for text generation.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FramerFactory:
    &#34;&#34;&#34;
    Factory class for creating Framer instances.

    This class encapsulates the logic for constructing Framer objects,
    ensuring that all necessary components are properly initialized.

    The Framer includes a `halt()` method to stop its actions and task processing.

    The FramerFactory supports the creation of Framers with custom plugins,
    allowing for extensive customization and expansion of capabilities.
    This plugin system is designed to be as flexible and powerful as mods in games,
    enabling developers to create a wide range of extensions and enhancements.
    &#34;&#34;&#34;

    def __init__(self, config: FramerConfig, llm_service: LLMService, plugins: Optional[Dict[str, Any]] = []):
        &#34;&#34;&#34;
        Initialize the FramerBuilder with configuration and LLM service.

        Args:
            config (FramerConfig): Configuration for the Framer.
            llm_service (LLMService): Language model service for text generation.
        &#34;&#34;&#34;
        &#34;&#34;&#34;
        Initialize the FramerFactory with configuration and LLM service.

        Args:
            config (FramerConfig): Configuration for the Framer.
            llm_service (LLMService): Language model service for text generation.
        &#34;&#34;&#34;
        if not isinstance(config, FramerConfig):
            raise TypeError(&#34;config must be an instance of FramerConfig&#34;)
        if not isinstance(llm_service, LLMService):
            raise TypeError(&#34;llm_service must be an instance of LLMService&#34;)
        self.logger = logging.getLogger(__name__)
        self.config = config
        self.llm_service = llm_service
        self.plugins = plugins

    async def create_framer(
        self,
        memory_service: Optional[MemoryService] = None,
        eq_service: Optional[EQService] = None,
        roles: Optional[List[Role]] = None,
        goals: Optional[List[Goal]] = None,
        plugins: Optional[Dict[str, Any]] = None,
    ) -&gt; Framer:
        self.plugins = plugins or {}
        execution_context = ExecutionContext(llm_service=self.llm_service)
        agency = Agency(
            llm_service=self.llm_service,
            execution_context=execution_context,
            context=None,
        )
        # Initialize the Agency component with default permissions
        self.config.permissions = self.config.permissions or [&#34;with_memory&#34;, &#34;with_mem0_search_extract_summarize_plugin&#34;, &#34;with_shared_context&#34;]
        roles, goals = await self._generate_roles_and_goals(agency, roles, goals)
        brain = Brain(
            # Initialize the Brain component with roles, goals, and default model
            llm_service=self.llm_service,
            roles=roles,
            goals=goals,
            default_model=(
                self.config.default_model
                if self.config.default_model
                else DEFAULT_MODEL
            ),
        )
        # Initialize the Soul component with the provided or default seed
        soul = Soul(seed=self.config.soul_seed)
        # Initialize the WorkflowManager component
        workflow_manager = WorkflowManager()
        # Set the memory service if provided, otherwise create a new one
        memory_service = memory_service or MemoryService(adapter=Mem0Adapter())

        framer = Framer(
            config=self.config,
            llm_service=self.llm_service,
            agency=agency,
            brain=brain,
            soul=soul,
            workflow_manager=workflow_manager,
            memory_service=memory_service,
            eq_service=eq_service,
            plugins=plugins
        )

        framer.agency.set_goals(goals)
        framer.agency.set_roles(roles)

        # Set the Framer instance in Brain and ActionRegistry
        framer.brain.set_framer(framer)
        framer.brain.agency.action_registry.set_framer(framer)

        # Notify observers about the Framer being opened
        for observer in framer.observers:
            if hasattr(observer, &#34;on_framer_opened&#34;):
                observer.on_framer_opened(framer)

        # Call on_load for each plugin
        for plugin_name, plugin_instance in framer.plugins.items():
            if hasattr(plugin_instance, &#34;on_load&#34;):
                self.logger.info(f&#34;Loading plugin: {plugin_name}&#34;)
                await plugin_instance.on_load(framer)
                self.logger.info(f&#34;Plugin {plugin_name} loaded successfully.&#34;)

        framer.plugin_loading_complete = True

        return framer

    async def _generate_roles_and_goals(self, agency, roles, goals):
        if roles is None or goals is None:
            roles, goals = await agency.generate_roles_and_goals()
        elif isinstance(roles, list) and len(roles) == 0:
            roles = []
            goals = []
        elif isinstance(goals, list) and len(goals) == 0:
            roles, goals = await agency.generate_roles_and_goals()
            goals = []
        elif isinstance(roles, list) and len(roles) == 0 and goals:
            roles, new_goals = await agency.generate_roles_and_goals()
            goals.extend(new_goals)

        # Ensure goals have a default status of ACTIVE
        for goal in goals:
            if isinstance(goal, dict):
                if &#34;status&#34; not in goal:
                    goal[&#34;status&#34;] = GoalStatus.ACTIVE.value
            else:
                goal.status = GoalStatus.ACTIVE
        for role in roles:
            if isinstance(role, dict):
                if &#34;status&#34; not in role:
                    role[&#34;status&#34;] = RoleStatus.ACTIVE.value
            else:
                role.status = RoleStatus.ACTIVE

        # Sort roles and goals by priority
        roles.sort(key=lambda x: x.priority.value if hasattr(x, &#39;priority&#39;) else 5, reverse=True)
        goals.sort(key=lambda x: x.priority.value if hasattr(x, &#39;priority&#39;) else 5, reverse=True)

        return roles, goals</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="frame.src.framer.framer_factory.FramerFactory.create_framer"><code class="name flex">
<span>async def <span class="ident">create_framer</span></span>(<span>self, memory_service: Optional[<a title="frame.src.services.memory.main.MemoryService" href="../services/memory/main.html#frame.src.services.memory.main.MemoryService">MemoryService</a>] = None, eq_service: Optional[<a title="frame.src.services.eq.main.EQService" href="../services/eq/main.html#frame.src.services.eq.main.EQService">EQService</a>] = None, roles: Optional[List[<a title="frame.src.framer.agency.roles.Role" href="agency/roles.html#frame.src.framer.agency.roles.Role">Role</a>]] = None, goals: Optional[List[<a title="frame.src.framer.agency.goals.Goal" href="agency/goals.html#frame.src.framer.agency.goals.Goal">Goal</a>]] = None, plugins: Optional[Dict[str, Any]] = None) ‑> <a title="frame.src.framer.framer.Framer" href="framer.html#frame.src.framer.framer.Framer">Framer</a></span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="frame.src.framer" href="index.html">frame.src.framer</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="frame.src.framer.framer_factory.FramerBuilder" href="#frame.src.framer.framer_factory.FramerBuilder">FramerBuilder</a></code></h4>
<ul class="">
<li><code><a title="frame.src.framer.framer_factory.FramerBuilder.build" href="#frame.src.framer.framer_factory.FramerBuilder.build">build</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="frame.src.framer.framer_factory.FramerFactory" href="#frame.src.framer.framer_factory.FramerFactory">FramerFactory</a></code></h4>
<ul class="">
<li><code><a title="frame.src.framer.framer_factory.FramerFactory.create_framer" href="#frame.src.framer.framer_factory.FramerFactory.create_framer">create_framer</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
